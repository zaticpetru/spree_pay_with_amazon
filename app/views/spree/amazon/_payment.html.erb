<%# %>
<%# Amazon Payments - Login and Pay for Spree Commerce %>
<%# %>
<%# @category    Amazon %>
<%# @package     Amazon_Payments %>
<%# @copyright   Copyright (c) 2014 Amazon.com %>
<%# @license     http://opensource.org/licenses/Apache-2.0  Apache License, Version 2.0 %>
<%# %>
var amazon_payment_post = false;
new OffAmazonPayments.Widgets.Wallet({
  sellerId: '<%= @amazon_gateway.preferred_merchant_id %>',
  onPaymentSelect: function(orderReference) {
    if (amazon_payment_post == false) {
      amazon_payment_post == true;
      jQuery.post(
        '/amazon_order/payment',
        {"order_reference": order_reference},
        function() {
          amazon_payment_post = false;
          amazonLoadingClick();
        }
      );
  },
  design: {
    designMode: 'responsive'
  },
  onError: function(error) {
    // your error handling code
  }
}).bind("walletWidgetDiv");
